import { Injectable } from '@angular/core';
import {AngularFirestore} from '@angular/fire/firestore';
import {Observable} from 'rxjs';
import {map, switchMap, tap} from 'rxjs/operators';

@Injectable({
  providedIn: 'root'
})
export class MapService {


  constructor(private db: AngularFirestore) {
  }

  makeArray(): void {
    const route = [
      [66.0361401334506, 32.65898465782812],
      [66.0361401334506, 32.65898465782812],
      [66.03751536348028, 32.65949535278196],
      [66.03939943003937, 32.65810489720025],
      [66.04009480879097, 32.65723371492641],
      [66.04097489766069, 32.65650415407436],
      [66.04190723585242, 32.657405376303366],
      [66.04268270609602, 32.66062402712124],
      [66.0435365673551, 32.66386413561123],
      [66.04443396209719, 32.66676092134731],
      [66.0453400373135, 32.669657707083395],
      [66.04624608027957, 32.67255449281948],
      [66.04694301260147, 32.67747688398231],
      [66.04848316988685, 32.69462585711153],
      [66.05143081331505, 32.70427322335309],
      [66.0543223763371, 32.715431212855044],
      [66.05707428173042, 32.725215911341365],
      [66.05931390410885, 32.72755908939872],
      [66.06055031404537, 32.73099231693778],
      [66.06119461653172, 32.73991870853934],
      [66.06262247198856, 32.74802970860038],
      [66.06281400747689, 32.75665569279227],
      [66.06260505959995, 32.76236343357596],
      [66.06302295363734, 32.76519584629569],
      [66.06389354416305, 32.76613998386893],
      [66.06519937407738, 32.77334976170096],
      [66.0668533290535, 32.778070449567174],
      [66.0680197378795, 32.78188991520438],
      [66.06897719767593, 32.78485107395682],
      [66.06965610186772, 32.78686809513602],
      [66.06965610186772, 32.78686809513602],
      [66.06993462142054, 32.7843790051702],
      [66.07103126250303, 32.78369235966239],
      [66.07259781057138, 32.78412151310477],
      [66.07416426211525, 32.78459358189139],
      [66.07571321372491, 32.78467941257987],
      [66.07673999479142, 32.78244781467948],
      [66.07747089841432, 32.77669715855155],
      [66.07755790935038, 32.77219104740653],
      [66.07691402136992, 32.76987361881766],
      [66.07613089238347, 32.7684574124578],
      [66.07574802054192, 32.763565063214635],
      [66.0754173538559, 32.760560989117955],
      [66.07442532798858, 32.7539949414495],
      [66.07440792368041, 32.749574660992955],
      [66.07543475747293, 32.74721431705985],
      [66.07687921614954, 32.74764347050223],
      [66.07797555769716, 32.750089645123815],
      [66.07861941878623, 32.75313663456473],
      [66.07891524138547, 32.75425243351493],
      [66.08119470003854, 32.753351211285924],
      [66.08196027387162, 32.7505187985662],
      [66.08354354657817, 32.74953174564872],
      [66.08477877875238, 32.75146293613944],
      [66.08614268462806, 32.75367736816407],
      [66.08730472824831, 32.75594330043532],
      [66.08779179818784, 32.75436401367188],
      [66.08770829941804, 32.752063754887786],
      [66.08711685654079, 32.739463805628475],
      [66.08819536162024, 32.7298507685191],
      [66.08903030185023, 32.721696853113826],
      [66.08795878959558, 32.70907974452712],
      [66.0865253988325, 32.70169830269879],
      [66.08579475559412, 32.6928577417857],
      [66.08669935841135, 32.68684959359234],
      [66.08951733764499, 32.68135642952984],
      [66.0908740309797, 32.67208671517437],
      [66.09250892410513, 32.661272048426326],
      [66.09452630673951, 32.65019988961285],
      [66.09588273254964, 32.648054122400936],
      [66.0973086405424, 32.64762496895855],
      [66.10061226601782, 32.650543212366756],
      [66.10264292232269, 32.65560722298687],
      [66.10468035097264, 32.661701201868716],
      [66.10638388519214, 32.66693687386579],
      [66.10666200237146, 32.67414665169781],
      [66.10680105981838, 32.6786098474986],
      [66.1073920454685, 32.681528090906795],
      [66.1073920454685, 32.681528090906795],
      [66.1061057649654, 32.682043075037654],
      [66.10509755359736, 32.68710708565777],
      [66.1052713860006, 32.69448852486676],
      [66.1055147493652, 32.70083999581402],
      [66.10614053016042, 32.70804977364605],
      [66.10571639375635, 32.71457289418322],
      [66.10446479370269, 32.71949100468192],
      [66.10399542856794, 32.724082946515416],
      [66.10545564715441, 32.728116988873815],
      [66.10649860900396, 32.73296642277274],
      [66.10702007385846, 32.73691463444266],
      [66.10787177674811, 32.743343355105026],
      [66.10903630383085, 32.74669933292899],
      [66.11042671394091, 32.74897384617362],
      [66.11178229045585, 32.75129127476249],
      [66.11317255012338, 32.75300788853202],
      [66.11484076118235, 32.75695610020194],
      [66.11649148707376, 32.76236343357596],
      [66.11873282714257, 32.7664403912786],
      [66.12109557589221, 32.76897239658866],
      [66.12269378113801, 32.77240562412772],
      [66.12298909064916, 32.7768688199285],
      [66.12363181122893, 32.78798389408622],
      [66.12291960636763, 32.79467868778739],
      [66.12196417819263, 32.799528121686315],
      [66.12113032055534, 32.798755645490026],
      [66.1199489753087, 32.7973823544744],
      [66.11902818277201, 32.80021476719413],
      [66.11906293026702, 32.8048925397161],
      [66.11911505142032, 32.81012821171317],
      [66.11921929340564, 32.81738090488944],
      [66.12000109464147, 32.82291698429618],
      [66.12047016381733, 32.82441902134452],
      [66.12179046011218, 32.82562065098319],
      [66.12248532529524, 32.8303413388494],
      [66.12330176756029, 32.83609199497733],
      [66.12406607267046, 32.84433174107108],
      [66.12578567495483, 32.851970672345495],
      [66.12741832072516, 32.848966598248815],
      [66.12851248193098, 32.848194122052526],
      [66.12973337121218, 32.84857177721279],
      [66.13029777381526, 32.84603977190273],
      [66.13100977148426, 32.84277820574062],
      [66.1314960023046, 32.840954303610495],
      [66.13134839750562, 32.838422298300436],
      [66.13086216385437, 32.836426734793356],
      [66.13074928685165, 32.83365869508999],
      [66.13069718960398, 32.830204009878805],
      [66.13087952950248, 32.82561206804531],
      [66.13111396458794, 32.82267236696499],
      [66.13073539420974, 32.81605052921805],
      [66.13021441663011, 32.81064319584403],
      [66.12998865635434, 32.80583667728934],
      [66.13027867132233, 32.805257320796954],
      [66.13027867132233, 32.805257320796954],
      [66.1299591337611, 32.80494832979458],
      [66.12988098541398, 32.80387544618862],
      [66.13037592087774, 32.802266120779684],
      [66.13025435867647, 32.800227641928366],
      [66.13014147896767, 32.79769563661831],
      [66.13040196984502, 32.794498443472555],
      [66.1312528880601, 32.79112958894985],
      [66.1321819192123, 32.787996768820456],
      [66.13279836034589, 32.7874817846896],
      [66.13340610453587, 32.787546157705954],
      [66.13377942588578, 32.78621578203457],
      [66.13452605209226, 32.78582954393642],
      [66.13532995298536, 32.78529310278828],
      [66.13522056835546, 32.78439187990444],
      [66.13506430385534, 32.78310441957729],
      [66.13485594968996, 32.78138780580776],
      [66.13498617124402, 32.77969264971035],
      [66.13568935607589, 32.779006004202536],
      [66.13617549714701, 32.7764954565646],
      [66.13646196876923, 32.77370595918911],
      [66.13735608664524, 32.77194643007534],
      [66.13823281238075, 32.77119541155117],
      [66.13881438598823, 32.77016544328945],
      [66.13893590714595, 32.76735448824184],
      [66.13877966555044, 32.76538038240688],
      [66.13788559789475, 32.76413583742397],
      [66.13759046184163, 32.762290477621725],
      [66.13796372156882, 32.76016616808193],
      [66.13819809114621, 32.7578916548373],
      [66.13789427831487, 32.75566005693691],
      [66.1379116391462, 32.75342845903652],
      [66.13849322012362, 32.75072479234951],
      [66.13931782699105, 32.74769926058071],
      [66.14047223179587, 32.73917198443087],
      [66.14220113590267, 32.73414230294293],
      [66.14421457080634, 32.72813415474957],
      [66.1468526226521, 32.72384262032574],
      [66.1500456863352, 32.71689033455914],
      [66.15434180383684, 32.7155857096659],
      [66.15663878317652, 32.7210960382945],
      [66.15836658492243, 32.72206592533622],
      [66.15836658492243, 32.72206592533622],
      [66.1581410753512, 32.71996307346854],
      [66.15937268007853, 32.72095012638602],
      [66.16112457794668, 32.72803115818534],
      [66.16176633197601, 32.73489761326346],
      [66.16278963582977, 32.74270820591483],
      [66.16367415328786, 32.75146293613944],
      [66.16445458420284, 32.75845813725028],
      [66.16497485811226, 32.76365089390311],
      [66.16551246325109, 32.77086067173514],
      [66.16655295688979, 32.778285026288366],
      [66.16778415244228, 32.78558063480887],
      [66.16915400386114, 32.79321956608329],
      [66.16984757124119, 32.79708194706473],
      [66.16990478968805, 32.7999272345187],
      [66.16976607804634, 32.80185842500942],
      [66.16954933958398, 32.802502155172995],
      [66.16954933958398, 32.802502155172995],
    ];

    route.map((q, i) => {
        this.db.collection('/coordinates').doc('/Elbrus').collection('/routes').doc('/1').update({[i]: q});
    });
  }

  getCoord(PathNumber: number): Observable<any> {

    console.log(PathNumber);



    switch (PathNumber) {
      case 0: {
        const coord = this.db.collection('/coordinates')
          .doc('/Khibiny')
          .collection('/routes')
          .valueChanges();
        return coord.pipe();
      }
      case 1: {
        const coord = this.db.collection('/coordinates')
          .doc('/Taganay')
          .collection('/routes')
          .valueChanges();
        return coord.pipe();
      }
      case 2: {
          const coord = this.db.collection('/coordinates')
            .doc('/Elbrus')
            .collection('/routes')
            .valueChanges();
          return coord.pipe();
      }
    }


  }

}
